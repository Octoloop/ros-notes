# ROS - MoveIt - Note 4


## Getting MoveIt to run on a custom robot

### Basic steps

0. Ensure you're using a catkin workspace and that you understand basic ROS concepts from the previous Notes(1-3)
1. Create a URDF (Use the solidworks plugin to convert from a CAD model to a URDF) *Refer
2. Generate the MoveIt configuration files using the MoveIt Setup Assistant.
     The MSA takes the URDF as input.
3. The MoveIt config files need to be stored as a "package" within your workspace
4. Use `ros_control` to write a driver that responds to move it commands.( includes the main `read` and `write` functions)
5. Write code in MoveIt to use the IK, FK, Planning and other functions(Using the `MoveGroup` class) - Check the next section for more detail


### Programming in MoveIt

![MoveIt-Arch.jpg](http://moveit.ros.org/wordpress/wp-content/uploads/2013/12/Overview.0012.jpg)

**The `move_group` node**
The figure above shows the high-level system architecture for the primary node provided by MoveIt! called `move_group`. This node serves as an integrator: pulling all the individual components together to provide a set of ROS actions and services for users to use.

The users can access the actions and services provided by `move_group` in one of three ways:

1. In C++ - using the `_move_group_interface package` that provides an easy to setup interface to `move_group` using C++

2. In Python - using the `moveit_commander` package

3. Through a GUI - using the Motion Planning plugin to Rviz (the ROS visualizer)

`move_group` can be configured using the ROS param server from where it will also get the URDF and SRDF for the robot.

move_group is a ROS node. It uses the ROS param server to get three kinds of information:

**Configs** 

URDF - move_group looks for the `robot_description` parameter on the ROS param server to get the URDF for the robot.

SRDF - move_group looks for the `robot_description_semantic` parameter on the ROS param server to get the SRDF for the robot. The SRDF is typically created (once) by a user using the MoveIt! Setup Assistant.

MoveIt! configuration - move_group will look on the ROS param server for other configuration specific to MoveIt! including joint limits, kinematics, motion planning, perception and other information. Config files for these components are automatically generated by the MoveIt! setup assistant and stored in the config directory of the corresponding MoveIt! config package for the robot.
